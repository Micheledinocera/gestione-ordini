import{d as f,C as S,D as b,E as w,O as h,q as a,s as d,t as r,F as e,G as x,H as Y,I as A,J as F,K as I,v as m,A as M,B as N,_ as D,r as K,c as k,L as O,M as R,N as T,P as z,z as L,Q as $,R as U,o as H}from"./entry.b9ea099d.js";import{u as B,a as P,b as G,g as J,c as Q,d as j}from"./order.4cb30f1f.js";const W=i=>(M("data-v-3787c970"),i=i(),N(),i),X={class:"order-container"},Z={class:"buttons-container"},ee=W(()=>r("div",{class:"oppure"}," Oppure ",-1)),te={class:"aggiungi"},se=f({__name:"OrderContainer",setup(i){const s=S(),l=b(),n=B(),{getGlobalOrder:c,isEmptyOrder:g}=P();return w(n,()=>{n.value!==null&&!g.value?(l.value=h.getOrder,s.value=n.value.id??""):s.value=""}),(_,o)=>(a(),d("div",X,[r("div",Z,[r("div",{class:"crea",onClick:o[0]||(o[0]=t=>l.value=("ORDER_TYPES"in _?_.ORDER_TYPES:e(h)).newOrder)}," Crea Nuovo Ordine "),ee,r("div",te,[x(r("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>A(s)?s.value=t:null),placeholder:"ID ordine",onKeydown:o[2]||(o[2]=F((...t)=>e(c)&&e(c)(...t),["enter"]))},null,544),[[Y,e(s)]]),r("div",{onClick:o[3]||(o[3]=(...t)=>e(c)&&e(c)(...t)),class:I(["get-order",{inactive:e(s).length==0},{error:e(s).length==0&&e(n)}])},m(e(s).length==0&&e(n)?"Errore":"Cerca Ordine"),3)])])]))}});const oe=D(se,[["__scopeId","data-v-3787c970"]]),re={class:"label"},ne={class:"counter-container"},ae={class:"counter"},de={key:0,class:"max"},ce=["onClick"],ie={class:"label"},le={key:0,class:"price"},_e=f({__name:"CategoryItem",props:{category:{},menuItems:{}},setup(i){const s=i,l=G(),n=K(!1),c=k(()=>l.value.prodotti.map(t=>t.id)),g=t=>{let p=l.value.prodotti;const v=c.value.indexOf(t.id);v!=-1?p.splice(v,1):p.push(t),l.value.prodotti=p},_=k(()=>J(s.menuItems,s.category,l.value)),o=k(()=>Q(_.value,s.category)??0);return(t,p)=>{var v,C,E;return a(),d("div",{class:I(["category-item",{collapsed:e(n)}])},[r("div",{class:"label-container",onClick:p[0]||(p[0]=u=>n.value=!e(n))},[r("div",re,m(t.category.value+(e(o)>0?" - "+e(o)+"€":"")),1),r("div",ne,[r("div",ae,m(e(_).length),1),(v=t.category)!=null&&v.max?(a(),d("div",de," /"+m((C=t.category)==null?void 0:C.max),1)):O("",!0)])]),r("div",{class:I(["menu-items-container",{inactive:e(_).length==((E=t.category)==null?void 0:E.max)}])},[(a(!0),d(R,null,T(t.menuItems?t.menuItems[t.category.id]:[],u=>(a(),d("div",{class:I(["menu-item",{selected:e(c).includes(u.id)}]),key:"menuItem_"+u.id,onClick:()=>g(u)},[r("div",ie,m(u.data.label+(u.data.isGift?" - gratuita":"")),1),u.data.price?(a(),d("div",le,m(u.data.price)+"€ ",1)):O("",!0)],10,ce))),128))],2)],2)}}});const ue=D(_e,[["__scopeId","data-v-29ad22c4"]]),V=i=>(M("data-v-355a6a23"),i=i(),N(),i),pe={class:"menu-items-selector"},ve={class:"label"},me={key:0},ge={class:"user-input-container"},ye=V(()=>r("div",{class:"label"}," Ordine per: ",-1)),Oe={key:0,class:"users-container"},he=V(()=>r("div",{class:"label"}," Oppure modifica ordine per: ",-1)),Ce={class:"user-items-container"},Ee=["onClick"],Ie={key:1,class:"categories-container"},Re=f({__name:"MenuItemsSelector",async setup(i){let s,l;const n=G(),c=b(),g=S(),{categoriesCollection:_,orderTotal:o,menuItems:t,activeCategories:p}=([s,l]=z(()=>j()),s=await s,l(),s),{selectOrder:v,users:C}=P();return(E,u)=>{const q=ue;return a(),d("div",pe,[r("div",ve,[L(m(e(c)==("ORDER_TYPES"in E?E.ORDER_TYPES:e(h)).newOrder?"Nuovo Ordine":"Ordine n: "+e(g))+" ",1),e(n).nome!==""?(a(),d("span",me," - "+m(e(o))+"€",1)):O("",!0)]),r("div",ge,[ye,x(r("input",{type:"text",placeholder:"Aggiungi nome","onUpdate:modelValue":u[0]||(u[0]=y=>e(n).nome=y)},null,512),[[Y,e(n).nome]])]),e(C).length>0&&e(n).nome==""?(a(),d("div",Oe,[he,r("div",Ce,[(a(!0),d(R,null,T(e(C),y=>(a(),d("div",{class:"user-item",key:"header_user_"+y,onClick:()=>e(v)(y)},m(y),9,Ee))),128))])])):O("",!0),e(n).nome!=""?(a(),d("div",Ie,[(a(!0),d(R,null,T(e(p),y=>(a(),$(q,{key:"category_"+y.id,category:y,menuItems:e(t)},null,8,["category","menuItems"]))),128))])):O("",!0)])}}});const fe=D(Re,[["__scopeId","data-v-355a6a23"]]),$e=f({__name:"index",setup(i){const s=B(),{getGlobalOrder:l,isEmptyOrder:n}=P(),c=b(),g=U(),_=S();return H(()=>{g.query.code&&(_.value=g.query.code,l())}),w(s,()=>{s.value!==null&&!n.value?(c.value=h.getOrder,_.value=s.value.id??""):_.value=""}),(o,t)=>{const p=oe,v=fe;return a(),d(R,null,[e(c)==("ORDER_TYPES"in o?o.ORDER_TYPES:e(h)).home?(a(),$(p,{key:0})):O("",!0),e(c)!=("ORDER_TYPES"in o?o.ORDER_TYPES:e(h)).home?(a(),$(v,{key:1})):O("",!0)],64)}}});export{$e as default};
