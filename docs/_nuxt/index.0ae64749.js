import{d as R,C as S,D,E as M,O as f,q as a,s as d,t as r,F as e,G as Y,H as x,I as K,J as z,K as T,v as g,A as N,B,_ as P,r as b,c as I,L as h,M as E,N as k,z as A,P as $,Q as L,o as U}from"./entry.b1044553.js";import{u as G,a as w,b as V,g as H,c as J,d as Q,e as j,f as W}from"./order.3f679218.js";const X=i=>(N("data-v-3787c970"),i=i(),B(),i),Z={class:"order-container"},ee={class:"buttons-container"},te=X(()=>r("div",{class:"oppure"}," Oppure ",-1)),se={class:"aggiungi"},oe=R({__name:"OrderContainer",setup(i){const s=S(),_=D(),c=G(),{getGlobalOrder:l,isEmptyOrder:y}=w();return M(c,()=>{c.value!==null&&!y.value?(_.value=f.getOrder,s.value=c.value.id??""):s.value=""}),(u,n)=>(a(),d("div",Z,[r("div",ee,[r("div",{class:"crea",onClick:n[0]||(n[0]=t=>_.value=("ORDER_TYPES"in u?u.ORDER_TYPES:e(f)).newOrder)}," Crea Nuovo Ordine "),te,r("div",se,[Y(r("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=t=>K(s)?s.value=t:null),placeholder:"ID ordine",onKeydown:n[2]||(n[2]=z((...t)=>e(l)&&e(l)(...t),["enter"]))},null,544),[[x,e(s)]]),r("div",{onClick:n[3]||(n[3]=(...t)=>e(l)&&e(l)(...t)),class:T(["get-order",{inactive:e(s).length==0},{error:e(s).length==0&&e(c)}])},g(e(s).length==0&&e(c)?"Errore":"Cerca Ordine"),3)])])]))}});const ne=P(oe,[["__scopeId","data-v-3787c970"]]),re={class:"label"},ae={class:"counter-container"},le={class:"counter"},de={key:0,class:"max"},ce={class:"menu-items-container"},ie=["onClick"],ue={class:"label"},_e={key:0,class:"price"},ve=R({__name:"CategoryItem",props:{category:{},menuItems:{}},setup(i){const s=i,_=V(),c=b(!1),l=I(()=>_.value.prodotti.map(t=>t.id)),y=t=>{let v=_.value.prodotti;const p=l.value.indexOf(t.id);p!=-1?v.splice(p,1):v.push(t),_.value.prodotti=v},u=I(()=>H(s.menuItems,s.category,_.value)),n=I(()=>J(u.value,s.category)??0);return(t,v)=>{var p,C;return a(),d("div",{class:T(["category-item",{collapsed:e(c)}])},[r("div",{class:"label-container",onClick:v[0]||(v[0]=o=>c.value=!e(c))},[r("div",re,g(t.category.value+(e(n)>0?" - "+e(n)+"€":"")),1),r("div",ae,[r("div",le,g(e(u).length),1),(p=t.category)!=null&&p.max?(a(),d("div",de," /"+g((C=t.category)==null?void 0:C.max),1)):h("",!0)])]),r("div",ce,[(a(!0),d(E,null,k(t.menuItems?t.menuItems[t.category.id]:[],o=>{var m;return a(),d("div",{class:T(["menu-item",{selected:e(l).includes(o.id),inactive:e(u).length==((m=t.category)==null?void 0:m.max)}]),key:"menuItem_"+o.id,onClick:()=>y(o)},[r("div",ue,g(o.data.label+(o.data.isGift?" - gratuita":"")),1),o.data.price?(a(),d("div",_e,g(o.data.price)+"€ ",1)):h("",!0)],10,ie)}),128))])],2)}}});const pe=P(ve,[["__scopeId","data-v-03ce0fcc"]]),F=i=>(N("data-v-fa46b17b"),i=i(),B(),i),me={class:"menu-items-selector"},ge={class:"label"},ye={key:0},Oe={class:"user-input-container"},he=F(()=>r("div",{class:"label"}," Ordine per: ",-1)),fe={key:0,class:"users-container"},Ie=F(()=>r("div",{class:"label"}," Oppure modifica ordine per: ",-1)),Ce={class:"user-items-container"},Ee=["onClick"],Re={key:1,class:"categories-container"},Te=R({__name:"MenuItemsSelector",setup(i){const s=V(),_=D(),c=S(),l=Q(),{getMenuItemsFromCategory:y}=j(),{selectOrder:u,users:n}=w(),t=b(),v=async o=>{const m=await y(o.value);t.value={...t.value,[o.value.id]:m}};l.value.forEach(o=>{v(b(o))});const p=I(()=>t.value?l.value.filter(o=>t.value[o==null?void 0:o.id]?t.value[o.id].length>0:!1).sort((o,m)=>o.order-m.order):l.value),C=I(()=>W(t.value,l.value,s.value));return(o,m)=>{const q=pe;return a(),d("div",me,[r("div",ge,[A(g(e(_)==("ORDER_TYPES"in o?o.ORDER_TYPES:e(f)).newOrder?"Nuovo Ordine":"Ordine n: "+e(c))+" ",1),e(s).nome!==""?(a(),d("span",ye," - "+g(e(C))+"€",1)):h("",!0)]),r("div",Oe,[he,Y(r("input",{type:"text",placeholder:"Aggiungi nome","onUpdate:modelValue":m[0]||(m[0]=O=>e(s).nome=O)},null,512),[[x,e(s).nome]])]),e(n).length>0&&e(s).nome==""?(a(),d("div",fe,[Ie,r("div",Ce,[(a(!0),d(E,null,k(e(n),O=>(a(),d("div",{class:"user-item",key:"header_user_"+O,onClick:()=>e(u)(O)},g(O),9,Ee))),128))])])):h("",!0),e(s).nome!=""?(a(),d("div",Re,[(a(!0),d(E,null,k(e(p),O=>(a(),$(q,{key:"category_"+O.id,category:O,menuItems:e(t)},null,8,["category","menuItems"]))),128))])):h("",!0)])}}});const be=P(Te,[["__scopeId","data-v-fa46b17b"]]),Se=R({__name:"index",setup(i){const s=G(),{getGlobalOrder:_,isEmptyOrder:c}=w(),l=D(),y=L(),u=S();return U(()=>{y.query.code&&(u.value=y.query.code,_())}),M(s,()=>{s.value!==null&&!c.value?(l.value=f.getOrder,u.value=s.value.id??""):u.value=""}),(n,t)=>{const v=ne,p=be;return a(),d(E,null,[e(l)==("ORDER_TYPES"in n?n.ORDER_TYPES:e(f)).home?(a(),$(v,{key:0})):h("",!0),e(l)!=("ORDER_TYPES"in n?n.ORDER_TYPES:e(f)).home?(a(),$(p,{key:1})):h("",!0)],64)}}});export{Se as default};
