import{d as R,C as b,D as S,E as w,O as f,q as d,s as l,t as n,F as e,G as x,H as Y,I as A,J as F,K as k,v as m,A as M,B as N,_ as D,r as K,c as E,L as h,M as I,N as T,P as z,z as L,Q as $,R as U,o as H}from"./entry.d7354ea4.js";import{u as B,a as P,b as G,g as J,c as Q,d as j}from"./order.b6e2de41.js";const W=u=>(M("data-v-3787c970"),u=u(),N(),u),X={class:"order-container"},Z={class:"buttons-container"},ee=W(()=>n("div",{class:"oppure"}," Oppure ",-1)),te={class:"aggiungi"},se=R({__name:"OrderContainer",setup(u){const s=b(),_=S(),a=B(),{getGlobalOrder:i,isEmptyOrder:g}=P();return w(a,()=>{a.value!==null&&!g.value?(_.value=f.getOrder,s.value=a.value.id??""):s.value=""}),(c,o)=>(d(),l("div",X,[n("div",Z,[n("div",{class:"crea",onClick:o[0]||(o[0]=t=>_.value=("ORDER_TYPES"in c?c.ORDER_TYPES:e(f)).newOrder)}," Crea Nuovo Ordine "),ee,n("div",te,[x(n("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>A(s)?s.value=t:null),placeholder:"ID ordine",onKeydown:o[2]||(o[2]=F((...t)=>e(i)&&e(i)(...t),["enter"]))},null,544),[[Y,e(s)]]),n("div",{onClick:o[3]||(o[3]=(...t)=>e(i)&&e(i)(...t)),class:k(["get-order",{inactive:e(s).length==0},{error:e(s).length==0&&e(a)}])},m(e(s).length==0&&e(a)?"Errore":"Cerca Ordine"),3)])])]))}});const oe=D(se,[["__scopeId","data-v-3787c970"]]),re={class:"label"},ne={class:"counter-container"},ae={class:"counter"},de={key:0,class:"max"},le={class:"menu-items-container"},ie=["onClick"],ce={class:"label"},ue={key:0,class:"price"},_e=R({__name:"CategoryItem",props:{category:{},menuItems:{}},setup(u){const s=u,_=G(),a=K(!1),i=E(()=>_.value.prodotti.map(t=>t.id)),g=t=>{let p=_.value.prodotti;const v=i.value.indexOf(t.id);v!=-1?p.splice(v,1):p.push(t),_.value.prodotti=p},c=E(()=>J(s.menuItems,s.category,_.value)),o=E(()=>Q(c.value,s.category)??0);return(t,p)=>{var v,C;return d(),l("div",{class:k(["category-item",{collapsed:e(a)}])},[n("div",{class:"label-container",onClick:p[0]||(p[0]=r=>a.value=!e(a))},[n("div",re,m(t.category.value+(e(o)>0?" - "+e(o)+"€":"")),1),n("div",ne,[n("div",ae,m(e(c).length),1),(v=t.category)!=null&&v.max?(d(),l("div",de," /"+m((C=t.category)==null?void 0:C.max),1)):h("",!0)])]),n("div",le,[(d(!0),l(I,null,T(t.menuItems?t.menuItems[t.category.id]:[],r=>{var O;return d(),l("div",{class:k(["menu-item",{selected:e(i).includes(r.id),inactive:e(c).length==((O=t.category)==null?void 0:O.max)}]),key:"menuItem_"+r.id,onClick:()=>g(r)},[n("div",ce,m(r.data.label+(r.data.isGift?" - gratuita":"")),1),r.data.price?(d(),l("div",ue,m(r.data.price)+"€ ",1)):h("",!0)],10,ie)}),128))])],2)}}});const pe=D(_e,[["__scopeId","data-v-03ce0fcc"]]),V=u=>(M("data-v-078053bd"),u=u(),N(),u),ve={class:"menu-items-selector"},me={class:"label"},ge={key:0},ye={class:"user-input-container"},Oe=V(()=>n("div",{class:"label"}," Ordine per: ",-1)),he={key:0,class:"users-container"},fe=V(()=>n("div",{class:"label"}," Oppure modifica ordine per: ",-1)),Ce={class:"user-items-container"},Ee=["onClick"],Ie={key:1,class:"categories-container"},Re=R({__name:"MenuItemsSelector",async setup(u){let s,_;const a=G(),i=S(),g=b(),{categoriesCollection:c,orderTotal:o,menuItems:t}=([s,_]=z(()=>j()),s=await s,_(),s),{selectOrder:p,users:v}=P(),C=E(()=>t.value?c.value.filter(r=>t.value[r==null?void 0:r.id]?t.value[r.id].length>0:!1).sort((r,O)=>r.order-O.order):c.value);return(r,O)=>{const q=pe;return d(),l("div",ve,[n("div",me,[L(m(e(i)==("ORDER_TYPES"in r?r.ORDER_TYPES:e(f)).newOrder?"Nuovo Ordine":"Ordine n: "+e(g))+" ",1),e(a).nome!==""?(d(),l("span",ge," - "+m(e(o))+"€",1)):h("",!0)]),n("div",ye,[Oe,x(n("input",{type:"text",placeholder:"Aggiungi nome","onUpdate:modelValue":O[0]||(O[0]=y=>e(a).nome=y)},null,512),[[Y,e(a).nome]])]),e(v).length>0&&e(a).nome==""?(d(),l("div",he,[fe,n("div",Ce,[(d(!0),l(I,null,T(e(v),y=>(d(),l("div",{class:"user-item",key:"header_user_"+y,onClick:()=>e(p)(y)},m(y),9,Ee))),128))])])):h("",!0),e(a).nome!=""?(d(),l("div",Ie,[(d(!0),l(I,null,T(e(C),y=>(d(),$(q,{key:"category_"+y.id,category:y,menuItems:e(t)},null,8,["category","menuItems"]))),128))])):h("",!0)])}}});const ke=D(Re,[["__scopeId","data-v-078053bd"]]),be=R({__name:"index",setup(u){const s=B(),{getGlobalOrder:_,isEmptyOrder:a}=P(),i=S(),g=U(),c=b();return H(()=>{g.query.code&&(c.value=g.query.code,_())}),w(s,()=>{s.value!==null&&!a.value?(i.value=f.getOrder,c.value=s.value.id??""):c.value=""}),(o,t)=>{const p=oe,v=ke;return d(),l(I,null,[e(i)==("ORDER_TYPES"in o?o.ORDER_TYPES:e(f)).home?(d(),$(p,{key:0})):h("",!0),e(i)!=("ORDER_TYPES"in o?o.ORDER_TYPES:e(f)).home?(d(),$(v,{key:1})):h("",!0)],64)}}});export{be as default};
