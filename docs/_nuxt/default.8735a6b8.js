import{d as D,R as V,C as B,r as k,c as C,i as K,q as n,s as c,t as a,v as l,F as e,P as U,y as W,M as F,N as $,x as M,L as P,S as J,K as x,T as X,_ as Y,U as Z,D as q,O as N,A as ee,B as oe,z as se,V as te}from"./entry.50920f08.js";import{u as H,a as L,e as j,d as Q,f as A,D as ne,C as re,h as ae,b as z,E as ce,i as le,g as de}from"./order.b365cba0.js";const ie={class:"order-id"},_e={class:"orders-container"},ue={class:"user-container"},ve={class:"label"},pe=["onClick"],me=["onClick"],Oe={class:"category"},he={class:"items"},fe={class:"item"},Se={class:"generate-code"},Re=D({__name:"OrderPanel",setup(R){const d=V(),u=H(),O=B(),{deleteOrder:v,getItemFromId:p,selectOrder:T,users:h}=L(),{getMenuItemsFromCategory:g}=j(),r=k(),i=Q(),E=async o=>{const s=await g(o.value);r.value={...r.value,[o.value.id]:s}};i.value.forEach(o=>{E(k(o))});const I=C(()=>location.origin+location.pathname+"?code="+O.value),f=C(()=>{let o={};return h.value.forEach(s=>{o[s]={},i.value.forEach(_=>{var m=G(s,_.id);m.length>0&&(o[s][_.id]={category:_.value,items:m})})}),o}),t=o=>{var _;var s=(_=u.value)==null?void 0:_.prodotti[o].map(m=>({id:m.id,data:p(m)}));return{nome:o,prodotti:s}},y=C(()=>{let o=0;return h.value.forEach(s=>{o+=A(r.value,i.value,t(s))}),o}),G=(o,s)=>u.value.prodotti[o].filter(_=>{var m;return((m=p(_))==null?void 0:m.category.id)==s}).map(_=>p(_));return(o,s)=>{const _=K("qrcode"),m=X;return n(),c("div",{class:x(["panel-overlay",{show:e(d)}]),onClick:s[1]||(s[1]=()=>d.value=!1)},[a("div",{class:"panel-container",onClick:s[0]||(s[0]=J(()=>{},["stop"]))},[a("div",ie," Ordine n:"+l(e(O))+" - "+l(e(y))+"€ ",1),e(d)?(n(),U(m,{key:0},{default:W(()=>[a("div",_e,[(n(!0),c(F,null,$(e(h),S=>(n(),c("div",{class:"order-item",key:"user_"+S},[a("div",ue,[a("div",ve,l(S)+" - "+l(("getOrderTotal"in o?o.getOrderTotal:e(A))(e(r),e(i),t(S)))+"€ ",1),a("div",{class:"icon edit",onClick:()=>e(T)(S)},null,8,pe),a("div",{class:"icon delete",onClick:()=>e(v)(S)},null,8,me)]),(n(!0),c(F,null,$(Object.keys(e(f)[S]),b=>(n(),c("div",{class:"menu-item",key:"menuItemPanel_"+b},[a("div",Oe,l(e(f)[S][b].category),1),a("div",he,[(n(!0),c(F,null,$(e(f)[S][b].items,w=>(n(),c("div",fe,l(w==null?void 0:w.label),1))),256))])]))),128))]))),128))]),a("div",Se,[M(_,{myclass:"qrcode",value:e(I),dotsOptions:"DOTS_OPTIONS"in o?o.DOTS_OPTIONS:e(ne),cornersSquareOptions:"CORNERS_SQUARE_OPTIONS"in o?o.CORNERS_SQUARE_OPTIONS:e(re),cornersDotOptions:"CORNERS_DOT_OPTIONS"in o?o.CORNERS_DOT_OPTIONS:e(ae)},null,8,["value","dotsOptions","cornersSquareOptions","cornersDotOptions"])])]),_:1})):P("",!0)])],2)}}});const Te=Y(Re,[["__scopeId","data-v-300f1d05"]]),ge=R=>(ee("data-v-bbc495f6"),R=R(),oe(),R),Ee={class:"header"},Ie={class:"title"},Ce={class:"label"},ye=ge(()=>a("div",{class:"icon"},null,-1)),Pe=D({__name:"Header",setup(R){const d=Z(),u=V(),O=H(),v=z(),p=q(),T=B(),h=C(()=>{var r,i;return Object.keys((r=O.value)!=null&&r.prodotti?(i=O.value)==null?void 0:i.prodotti:{}).length}),g=()=>{O.value=structuredClone(ce),v.value=structuredClone(le),p.value=N.home,T.value=""};return(r,i)=>{var E,I,f,t;return n(),c("div",Ee,[e(p)!==("ORDER_TYPES"in r?r.ORDER_TYPES:e(N)).home?(n(),c("div",{key:0,class:"refresh",onClick:g})):P("",!0),a("div",Ie,l((E=e(d))==null?void 0:E.appName)+" - Version "+l((I=e(d))==null?void 0:I.versione.major)+"."+l((f=e(d))==null?void 0:f.versione.minor)+"."+l((t=e(d))==null?void 0:t.versione.revision),1),e(h)>0?(n(),c("div",{key:1,class:"order",onClick:i[0]||(i[0]=y=>u.value=!e(u))},[a("div",Ce,l(e(h)),1),ye])):P("",!0)])}}});const ke=Y(Pe,[["__scopeId","data-v-bbc495f6"]]),Ne={class:"footer"},De=D({__name:"Footer",setup(R){const{createOrder:d,updateOrder:u,users:O}=L(),v=z(),{getMenuItemsFromCategory:p}=j(),T=V(),h=q(),g=Q(),r=k(),i=async t=>{const y=await p(t.value);r.value={...r.value,[t.value.id]:y}};g.value.forEach(t=>{i(k(t))});const E=()=>{h.value==N.newOrder?d():u(),T.value=!0},I=C(()=>O.value.includes(v.value.nome)),f=C(()=>g.value.some(t=>t.min?t.min>de(r.value,t,v.value).length:!1));return(t,y)=>(n(),c("div",Ne,[e(v).nome!=""?(n(),c("div",{key:0,class:x(["aggiungi",{inactive:e(f)}]),onClick:E},[se(l(e(I)?"Modifica ordine per ":"Aggiungi all'ordine come "),1),a("b",null,l(e(v).nome),1)],2)):P("",!0)]))}});const be=Y(De,[["__scopeId","data-v-8cc54333"]]),$e=D({__name:"default",setup(R){const d=q();return(u,O)=>{const v=Te,p=ke,T=be;return n(),c("div",null,[M(v),M(p),te(u.$slots,"default"),e(d)!=("ORDER_TYPES"in u?u.ORDER_TYPES:e(N)).home?(n(),U(T,{key:0})):P("",!0)])}}});export{$e as default};
